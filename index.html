<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Code Bank">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Code Bank">
<meta property="og:locale">
<meta property="article:author" content="Loujuch">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>Code Bank</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="تشغيل شريط التصفح">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Code Bank</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>الأرشيفات</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/03/0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Loujuch">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code Bank">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/03/0/" class="post-title-link" itemprop="url">Linux Socket TCP Connect概述</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">نُشر في</span>
              

              <time title="أُنشأ: 2024-12-03 20:05:44 / عُدل: 21:17:24" itemprop="dateCreated datePublished" datetime="2024-12-03T20:05:44+08:00">2024-12-03</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>在使用Linux的Socket进行TCP连接时，需要使用Connect进行3次握手以完成连接。其函数原型如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">connect</span><span class="params">(<span class="type">int</span> sockfd, <span class="type">const</span> <span class="keyword">struct</span> sockaddr *addr, <span class="type">socklen_t</span> addrlen)</span></span>;</span><br></pre></td></tr></table></figure>

<h2 id="阻塞状态"><a href="#阻塞状态" class="headerlink" title="阻塞状态"></a>阻塞状态</h2><p>当socket处于阻塞状态时，调用Connect将进入阻塞状态，自到三次握手成功或连接失败。</p>
<p>Socket判断连接失败的方式是设置单次握手的超时时间+设置允许超时的次数，Linux通常情况下超时时间呈2的指数次方增长，超时次数设为6次，可以使用<code>sysctl net.ipv4.tcp_syn_retries</code>查看允许超时次数。因此当连接失败时需要等待<code>1s + 2s + 4s + 8s + 16s + 32s + 64s = 127s</code>。该时间明显过长。</p>
<p>当connect连接成功时，将会返回0；当连接失败是，返回-1并设置errno。</p>
<h2 id="非阻塞状态"><a href="#非阻塞状态" class="headerlink" title="非阻塞状态"></a>非阻塞状态</h2><p>当socket处于阻塞状态时，调用Connect将立即返回，同时尝试进行三次握手，这使得程序能够在进行握手的同时异步的进行其他事务的处理。</p>
<p>通常情况下，当连接目标非本机时，将会立即返回-1，并设置<code>errno</code>为<code>EINPROGRESS</code>；当连接目标为本机时，立即能够获得连接结果并进行处理。</p>
<p>当进入异步连接状态时，可以通过判断soeket描述符是否可写来判断是否完成连接处理判断。这可以使用<code>select</code>等方式进行处理。</p>
<p>当判断连接完成时，还需要判断连接是否成功。通常情况下，可以通过将<code>getsockopt</code>获取soeket描述符上的错误。</p>
<p>一个简单的非阻塞socket connect demo如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">socket_connect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="type">int</span> sock = <span class="built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">assert</span>(<span class="number">-1</span> != sock);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> flag=<span class="built_in">fcntl</span>(sock, F_GETFL);</span><br><span class="line">        <span class="built_in">assert</span>(<span class="number">-1</span> != flag);</span><br><span class="line">        flag = <span class="built_in">fcntl</span>(fd,F_SETFL,flag | O_NONBLOCK);</span><br><span class="line">        <span class="built_in">assert</span>(<span class="number">-1</span> != flag);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">sockaddr_in</span> addr;</span><br><span class="line">        <span class="type">socklen_t</span> addrlen;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">bzero</span>(&amp;addr, <span class="built_in">sizeof</span>(addr));</span><br><span class="line">        addr.sin_family=AF_INET;</span><br><span class="line">        addr.sin_port=<span class="built_in">htons</span>(<span class="built_in">atoi</span>(port));</span><br><span class="line">        flag = <span class="built_in">inet_pton</span>(AF_INET,ip,&amp;addr.sin_addr.s_addr);</span><br><span class="line">        <span class="built_in">assert</span>(<span class="number">-1</span> != flag);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> ret = <span class="built_in">connect</span>(sock, (<span class="keyword">struct</span> sockaddr *)&amp;addr, <span class="built_in">sizeof</span>(addr));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="number">0</span> == ret) &#123;</span><br><span class="line">            <span class="keyword">return</span> sock;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(errno != EINPROGRESS) &#123;</span><br><span class="line">            <span class="built_in">close</span>(sock);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fd_set writefds;</span><br><span class="line">        <span class="keyword">struct</span> <span class="title class_">timeval</span> timeout;</span><br><span class="line"></span><br><span class="line">        timeout.tv_sec = s;</span><br><span class="line">        timeout.tv_usec = us;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="built_in">FD_ZERO</span>(&amp;writefds);</span><br><span class="line">            <span class="built_in">FD_SET</span>(sock, &amp;writefds);</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> ret = <span class="built_in">select</span>(sock + <span class="number">1</span>, <span class="literal">NULL</span>, &amp;writefds, <span class="literal">NULL</span>, &amp;timeout);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(<span class="number">0</span> == ret) &#123;</span><br><span class="line">                <span class="built_in">onTimeout</span>();</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="number">-1</span> == ret) &#123;</span><br><span class="line">                <span class="keyword">if</span>(EINTR == errno) &#123;</span><br><span class="line">                    <span class="built_in">onTimeout</span>();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="built_in">close</span>(sock);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="number">1</span> == ret) &#123;</span><br><span class="line">                <span class="keyword">if</span>(!<span class="built_in">FD_ISSET</span>(sock, &amp;writefds)) &#123;</span><br><span class="line">                    <span class="built_in">close</span>(sock);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="type">int</span> error = <span class="number">0</span>;</span><br><span class="line">                    <span class="type">socklen_t</span> length=<span class="built_in">sizeof</span>(error);</span><br><span class="line">                    ret = <span class="built_in">getsockopt</span>(sock, SOL_SOCKET, SO_ERROR, &amp;error, &amp;length);</span><br><span class="line">                    <span class="keyword">if</span>(<span class="number">-1</span> == ret || <span class="number">0</span> != error) &#123;</span><br><span class="line">                        <span class="built_in">close</span>(sock);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> sock;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">close</span>(sock);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/01/0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Loujuch">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code Bank">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/01/0/" class="post-title-link" itemprop="url">Debian重装后设置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">نُشر في</span>

              <time title="أُنشأ: 2024-12-01 14:06:54" itemprop="dateCreated datePublished" datetime="2024-12-01T14:06:54+08:00">2024-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">عُدل في</span>
                <time title="عُدل: 2024-12-03 21:07:52" itemprop="dateModified" datetime="2024-12-03T21:07:52+08:00">2024-12-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="为当前用户添加sudo权限"><a href="#为当前用户添加sudo权限" class="headerlink" title="为当前用户添加sudo权限"></a>为当前用户添加sudo权限</h2><p>在<code>root</code>下编辑<code>/etc/sudoers</code>文件，在文件末尾追加，其中&lt;user&gt;表示要添加用户的标识符：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;user&gt;     ALL=(ALL:ALL) ALL</span><br></pre></td></tr></table></figure>

<h2 id="修改apt下载镜像"><a href="#修改apt下载镜像" class="headerlink" title="修改apt下载镜像"></a>修改apt下载镜像</h2><p>修改<code>/etc/apt/sources.list</code>文件，将其改为如下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">deb https://mirrors.aliyun.com/debian/ bookworm main non-free non-free-firmware contrib</span><br><span class="line">deb-src https://mirrors.aliyun.com/debian/ bookworm main non-free non-free-firmware contrib</span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/debian-security/ bookworm-security main</span><br><span class="line">deb-src https://mirrors.aliyun.com/debian-security/ bookworm-security main</span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/debian/ bookworm-updates main non-free non-free-firmware contrib</span><br><span class="line">deb-src https://mirrors.aliyun.com/debian/ bookworm-updates main non-free non-free-firmware contrib</span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/debian/ bookworm-backports main non-free non-free-firmware contrib</span><br><span class="line">deb-src https://mirrors.aliyun.com/debian/ bookworm-backports main non-free non-free-firmware contrib</span><br></pre></td></tr></table></figure>

<p>运行<code>sudo apt update</code>刷新缓存。</p>
<h2 id="修改系统语言为中文并添加中文输入法"><a href="#修改系统语言为中文并添加中文输入法" class="headerlink" title="修改系统语言为中文并添加中文输入法"></a>修改系统语言为中文并添加中文输入法</h2><p>运行<code>sudo dpkg-reconfigure locales</code>命令，并选择<code>zh_CN.UTF-8</code>作为默认区域设置。</p>
<p>运行如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install ibus ibus-clutter ibus-gtk ibus-gtk3 ibus-qt4 -y</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt install ibus-libpinyin -y</span><br></pre></td></tr></table></figure>

<p>重启后在设置中设置中文输入：</p>
<p><img src="/2024/12/01/0/image.png"></p>
<h2 id="安装相关应用"><a href="#安装相关应用" class="headerlink" title="安装相关应用"></a>安装相关应用</h2><p>运行如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install build-essential manpages-dev git cmake make vim gdb adb valgrind -y</span><br><span class="line"></span><br><span class="line">wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb </span><br><span class="line"><span class="built_in">sudo</span> apt install ./google-chrome-stable_current_amd64.deb</span><br><span class="line"></span><br><span class="line">wget -q https://packages.microsoft.com/keys/microsoft.asc -O- | <span class="built_in">sudo</span> apt-key add -</span><br><span class="line"><span class="built_in">sudo</span> apt install software-properties-common apt-transport-https wget</span><br><span class="line"><span class="built_in">sudo</span> add-apt-repository <span class="string">&quot;deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> apt update </span><br><span class="line"><span class="built_in">sudo</span> apt install code</span><br></pre></td></tr></table></figure>

<h2 id="挂载Win共享磁盘分区"><a href="#挂载Win共享磁盘分区" class="headerlink" title="挂载Win共享磁盘分区"></a>挂载Win共享磁盘分区</h2><p>首先保证在win下创建了一个可用于共享的分区。</p>
<p>运行如下命令，获得对应的分区UUID和目标用户的id和对应组id：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsblk</span><br><span class="line"><span class="built_in">id</span> &lt;user&gt;</span><br></pre></td></tr></table></figure>

<p>在<code>/etc/fstab</code>下添加：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UUID=&lt;UUID&gt; &lt;mount_point&gt; exfat defaults,utf8,uid=&lt;user_id&gt;,gid=&lt;user_group_id&gt;,dmask=022,fmask=133 0 0</span><br></pre></td></tr></table></figure>

<p>于是便完成了开机自动挂载设置。</p>
<h2 id="设置vim禁用鼠标"><a href="#设置vim禁用鼠标" class="headerlink" title="设置vim禁用鼠标"></a>设置vim禁用鼠标</h2><p>在vim中输入<code>scriptnames</code>命令查看配置文件列表，并在其中查找包含<code>set mouse</code>命令的文件，在该文件末尾添加：<code>set mouse=</code>。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/25/0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Loujuch">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code Bank">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/25/0/" class="post-title-link" itemprop="url">Win10安装Debian双系统</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">نُشر في</span>

              <time title="أُنشأ: 2024-11-25 22:54:42" itemprop="dateCreated datePublished" datetime="2024-11-25T22:54:42+08:00">2024-11-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">عُدل في</span>
                <time title="عُدل: 2024-11-26 12:56:57" itemprop="dateModified" datetime="2024-11-26T12:56:57+08:00">2024-11-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="制作系统盘"><a href="#制作系统盘" class="headerlink" title="制作系统盘"></a>制作系统盘</h2><h3 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h3><p>在<a target="_blank" rel="noopener" href="https://www.debian.org/distrib/index.zh-cn.html">Debian官网</a>下载系统进行，推荐下载完整镜像。</p>
<p><img src="/2024/11/25/0/0.png"></p>
<h3 id="下载UltralSO"><a href="#下载UltralSO" class="headerlink" title="下载UltralSO"></a>下载UltralSO</h3><p>在<a target="_blank" rel="noopener" href="https://ultraiso.net/xiazai.html">UltraISO官网</a>下载安装包并进行安装。</p>
<h3 id="制作系统镜像"><a href="#制作系统镜像" class="headerlink" title="制作系统镜像"></a>制作系统镜像</h3><p>首先插入U盘，打开UltralSO并打开下载好的系统镜像。</p>
<p>之后点击“启动”下的“写入磁盘映像”。</p>
<p><img src="/2024/11/25/0/1.png"></p>
<p>最后，先进行格式化，后进行写入。写入完成后便完成系统盘制作。</p>
<p><img src="/2024/11/25/0/3.png"></p>
<h2 id="划分磁盘空间"><a href="#划分磁盘空间" class="headerlink" title="划分磁盘空间"></a>划分磁盘空间</h2><ol>
<li><p>点击“Win+X”，选择磁盘管理：</p>
<p> <img src="/2024/11/25/0/4.png"></p>
</li>
<li><p>右键目标磁盘，选择压缩卷：</p>
<p> <img src="/2024/11/25/0/5.png"></p>
</li>
<li><p>填写压缩量，获得一块连续的未分配空间：</p>
<p> <img src="/2024/11/25/0/6.png"></p>
</li>
</ol>
<h2 id="使用系统盘安装系统"><a href="#使用系统盘安装系统" class="headerlink" title="使用系统盘安装系统"></a>使用系统盘安装系统</h2><ol>
<li><p>在“设置-安全与更新-恢复-高级启动”处点击“立即重启”：</p>
<p> <img src="/2024/11/25/0/2.png"></p>
</li>
<li><p>在重启的蓝色页面中找到从U盘启动（如果失败则进入bios关闭安全启动）。</p>
</li>
<li><p>之后按照系统提示操作即可。</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/17/0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Loujuch">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code Bank">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/17/0/" class="post-title-link" itemprop="url">WSL任何操作都报错（退出代码 1603，错误码：Wsl/CallMsi/Install/ERROR_INSTALL_FAILURE）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">نُشر في</span>
              

              <time title="أُنشأ: 2024-11-17 18:35:53 / عُدل: 18:51:05" itemprop="dateCreated datePublished" datetime="2024-11-17T18:35:53+08:00">2024-11-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="具体错误信息"><a href="#具体错误信息" class="headerlink" title="具体错误信息"></a>具体错误信息</h2><p>在<code>PowerShell</code>中运行<code>wsl</code>命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">WSL 正在完成升级...</span><br><span class="line">Warning 1946.Property &#x27;System.AppUserModel.ID&#x27; for shortcut &#x27;WSL.lnk&#x27; could not be set.</span><br><span class="line">Warning 1946.Property &#x27;System.AppUserModel.ToastActivatorCLSID&#x27; for shortcut &#x27;WSL.lnk&#x27; could not be set.</span><br><span class="line">Could not write value  to key \SOFTWARE\Classes\Directory\shell\WSL.   Verify that you have sufficient access to that key, or contact your support personnel.</span><br><span class="line">更新失败(退出代码: 1603)。</span><br><span class="line">Error code: Wsl/CallMsi/Install/ERROR_INSTALL_FAILURE</span><br></pre></td></tr></table></figure>

<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><ol>
<li><p>开启依赖项：</p>
<p> 在管理员权限的<code>PowerShell</code>，运行：</p>
 <figure class="highlight ps1"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dism.exe /online /<span class="built_in">enable-feature</span> /featurename:VirtualMachinePlatform /all /norestart</span><br><span class="line"><span class="built_in">Enable-WindowsOptionalFeature</span> <span class="literal">-Online</span> <span class="literal">-FeatureName</span> VirtualMachinePlatform <span class="literal">-NoRestart</span></span><br></pre></td></tr></table></figure>

<p> 重启<code>Windows 10</code>。</p>
</li>
<li><p>修改注册表：</p>
<p> 键入<code>win+r</code>，打开<code>运行</code>面板，输入<code>regedit</code>，打开注册表编辑器。</p>
<p> 在注册表编辑器中将下述键重命名（最好操作前进行备份）：</p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将下列键</span></span><br><span class="line">计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Drive\shell\WSL</span><br><span class="line">计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Directory\background\shell\WSL</span><br><span class="line">计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Directory\shell\WSL</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重命名为</span></span><br><span class="line">计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Drive\shell\WSL_bak</span><br><span class="line">计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Directory\background\shell\WSL_bak</span><br><span class="line">计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Directory\shell\WSL_bak</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/11/2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Loujuch">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code Bank">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/11/2/" class="post-title-link" itemprop="url">Android Camera device HAL 3.6文档翻译——S9：关于控件和元数据的说明</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">نُشر في</span>
              

              <time title="أُنشأ: 2024-11-11 23:49:51 / عُدل: 23:52:35" itemprop="dateCreated datePublished" datetime="2024-11-11T23:49:51+08:00">2024-11-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本节主要是对可变元数据标签的含义和用法进行说明。</p>
<blockquote>
<p><em>This section contains notes about the interpretation and usage of various metadata tags.</em></p>
</blockquote>
<h2 id="S9-1-高质量（HIGH-QUALITY）模式和快速（FAST）模式"><a href="#S9-1-高质量（HIGH-QUALITY）模式和快速（FAST）模式" class="headerlink" title="S9.1 高质量（HIGH_QUALITY）模式和快速（FAST）模式"></a>S9.1 高质量（HIGH_QUALITY）模式和快速（FAST）模式</h2><p>许多相机后处理模块可能具有<code>HIGH_QUALITY</code>、<code>FAST</code>或<code>OFF</code>操作模式。这些模块通常也有一个‘可用模式’标签，用于表示给定设备有哪些操作模式可用。下面是实现这些模式的一般策略：</p>
<blockquote>
<p><em>Many camera post-processing blocks may be listed as having HIGH_QUALITY, FAST, and OFF operating modes. These blocks will typically also have an ‘available modes’ tag representing which of these operating modes are available on a given device. The general policy regarding implementing these modes is as follows:</em></p>
</blockquote>
<ol>
<li><p>无法禁用的硬件模块的操作模式控制器不能将<code>OFF</code>列在其自身的‘可用模式’标签中。</p>
<blockquote>
<p><em>Operating mode controls of hardware blocks that cannot be disabled must not list OFF in their corresponding ‘available modes’ tags.</em></p>
</blockquote>
</li>
<li><p>如果硬件模块可以被禁用，<code>OFF</code>将总是包含其具有的‘可用模式’标签中。</p>
<blockquote>
<p><em>OFF will always be included in their corresponding ‘available modes’ tag if it is possible to disable that hardware block.</em></p>
</blockquote>
</li>
<li><p>对于设备支持的所有后处理模块，<code>FAST</code>必须始终被包含在对应的‘可用模式’标签中。如果一个后处理模块还有不符合<code>FAST</code>模式帧率要求的更慢、更高质量的操作模式，<code>HIGH_QUALITY</code>应该被包含在对应的‘可用模式’标签中以表示该操作模式。</p>
<blockquote>
<p><em>FAST must always be included in the ‘available modes’ tags for all post-processing blocks supported on the device.  If a post-processing block also has a slower and higher quality operating mode that does not meet the framerate requirements for FAST mode, HIGH_QUALITY should be included in the ‘available modes’ tag to represent this operating mode.</em></p>
</blockquote>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/11/1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Loujuch">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code Bank">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/11/1/" class="post-title-link" itemprop="url">Android Camera device HAL 3.6文档翻译——S3：操作模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">نُشر في</span>
              

              <time title="أُنشأ: 2024-11-11 23:39:09 / عُدل: 23:54:35" itemprop="dateCreated datePublished" datetime="2024-11-11T23:39:09+08:00">2024-11-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>HAL3相机设备被要求支持两种可能操作模式，两种操作模式分别为受限模式和完整模式。高端设备应当支持完整模式。限制模式则被要求其硬件与HAL1版本的设备实现大致相同，并且应当被使用在更老或相对低端的设备中。完整模式应当是受限模式的严格超集，并且都具有文档所示的必要的操作流程。</p>
<blockquote>
<p><em>The camera 3 HAL device can implement one of two possible operational modes; limited and full. Full support is expected from new higher-end devices. Limited mode has hardware requirements roughly in line with those for a camera HAL device v1 implementation, and is expected from older or inexpensive devices. Full is a strict superset of limited, and they share the same essential operational flow, as documented above.</em></p>
</blockquote>
<p>HAL必须在android.info.supportedHardwareLevel静态元数据条目中给出支持的操作模式，为0是表明支持受限模式，为1表示支持完整模式。</p>
<blockquote>
<p><em>The HAL must indicate its level of support with the android.info.supportedHardwareLevel static metadata entry, with 0 indicating limited mode, and 1 indicating full mode support.</em></p>
</blockquote>
<p>粗略的说，受限模式的设备不允许应用控制捕获设置（只支持3A设置）、高分辨率图像的高帧率捕获、读出传感器生成的生数据或高于最大纪录分辨率的YUV输出流支持（JPEG仅适用于大图像）。</p>
<blockquote>
<p><em>Roughly speaking, limited-mode devices do not allow for application control of capture settings (3A control only), high-rate capture of high-resolution images, raw sensor readout, or support for YUV output streams above maximum recording resolution (JPEG only for large images).</em></p>
</blockquote>
<p><strong>限制模式行为的细节：</strong></p>
<blockquote>
<p><em><strong>Details of limited mode behavior:</strong></em></p>
</blockquote>
<ul>
<li><p>限制模式设备不需要实现捕获请求设置和实际图像数据被捕获间的精确捕获。相反的，设置的修改将可能会在之后的一段时间后才生效，并可能不会对一个输出帧应用全部的设置条目修改。快速的改变设置可能会导致一些设置从未被任何捕获使用。然而，包含高分辨率输出缓冲区（&gt;1080p）的捕获必须使用指定的设置（关于处理帧率，请参阅下文）。</p>
<blockquote>
<p><em>Limited-mode devices do not need to implement accurate synchronization between capture request settings and the actual image data captured. Instead, changes to settings may take effect some time in the future, and possibly not for the same output frame for each settings entry. Rapid changes in settings may result in some settings never being used for a capture. However, captures that include high-resolution output buffers ( &gt; 1080p ) have to use the settings as specified (but see below for processing rate).</em></p>
</blockquote>
</li>
<li><p>限制模式设备不需要支持大多数设置&#x2F;结果&#x2F;静态元数据信息。特别的，只希望如下设置被限制模式设备消费或制造：</p>
<blockquote>
<p><em>Limited-mode devices do not need to support most of the settings&#x2F;result&#x2F;static info metadata. Specifically, only the following settings are expected to be consumed or produced by a limited-mode HAL device:</em></p>
</blockquote>
<blockquote>
<p><code>android.control.aeAntibandingMode (controls and dynamic)</code><br><code>android.control.aeExposureCompensation (controls and dynamic)</code><br><code>android.control.aeLock (controls and dynamic)</code><br><code>android.control.aeMode (controls and dynamic)</code><br><code>android.control.aeRegions (controls and dynamic)</code><br><code>android.control.aeTargetFpsRange (controls and dynamic)</code><br><code>android.control.aePrecaptureTrigger (controls and dynamic)</code><br><code>android.control.afMode (controls and dynamic)</code><br><code>android.control.afRegions (controls and dynamic)</code><br><code>android.control.awbLock (controls and dynamic)</code><br><code>android.control.awbMode (controls and dynamic)</code><br><code>android.control.awbRegions (controls and dynamic)</code><br><code>android.control.captureIntent (controls and dynamic)</code><br><code>android.control.effectMode (controls and dynamic)</code><br><code>android.control.mode (controls and dynamic)</code><br><code>android.control.sceneMode (controls and dynamic)</code><br><code>android.control.videoStabilizationMode (controls and dynamic)</code><br><code>android.control.aeAvailableAntibandingModes (static)</code><br><code>android.control.aeAvailableModes (static)</code><br><code>android.control.aeAvailableTargetFpsRanges (static)</code><br><code>android.control.aeCompensationRange (static)</code><br><code>android.control.aeCompensationStep (static)</code><br><code>android.control.afAvailableModes (static)</code><br><code>android.control.availableEffects (static)</code><br><code>android.control.availableSceneModes (static)</code><br><code>android.control.availableVideoStabilizationModes (static)</code><br><code>android.control.awbAvailableModes (static)</code><br><code>android.control.maxRegions (static)</code><br><code>android.control.sceneModeOverrides (static)</code><br><code>android.control.aeState (dynamic)</code><br><code>android.control.afState (dynamic)</code><br><code>android.control.awbState (dynamic)</code></p>
<p><code>android.flash.mode (controls and dynamic)</code><br><code>android.flash.info.available (static)</code></p>
<p><code>android.info.supportedHardwareLevel (static)</code></p>
<p><code>android.jpeg.gpsCoordinates (controls and dynamic)</code><br><code>android.jpeg.gpsProcessingMethod (controls and dynamic)</code><br><code>android.jpeg.gpsTimestamp (controls and dynamic)</code><br><code>android.jpeg.orientation (controls and dynamic)</code><br><code>android.jpeg.quality (controls and dynamic)</code><br><code>android.jpeg.thumbnailQuality (controls and dynamic)</code><br><code>android.jpeg.thumbnailSize (controls and dynamic)</code><br><code>android.jpeg.availableThumbnailSizes (static)</code><br><code>android.jpeg.maxSize (static)</code></p>
<p><code>android.lens.info.minimumFocusDistance (static)</code></p>
<p><code>android.request.id (controls and dynamic)</code></p>
<p><code>android.scaler.cropRegion (controls and dynamic)</code><br><code>android.scaler.availableStreamConfigurations (static)</code><br><code>android.scaler.availableMinFrameDurations (static)</code><br><code>android.scaler.availableStallDurations (static)</code><br><code>android.scaler.availableMaxDigitalZoom (static)</code><br><code>android.scaler.maxDigitalZoom (static)</code><br><code>android.scaler.croppingType (static)</code></p>
<p><code>android.sensor.orientation (static)</code><br><code>android.sensor.timestamp (dynamic)</code></p>
<p><code>android.statistics.faceDetectMode (controls and dynamic)</code><br><code>android.statistics.info.availableFaceDetectModes (static)</code><br><code>android.statistics.faceIds (dynamic)</code><br><code>android.statistics.faceLandmarks (dynamic)</code><br><code>android.statistics.faceRectangles (dynamic)</code><br><code>android.statistics.faceScores (dynamic)</code></p>
<p><code>android.sync.frameNumber (dynamic)</code><br><code>android.sync.maxLatency (static)</code></p>
</blockquote>
</li>
<li><p>包含高分辨率输出缓冲区（&gt;1080p）的受限模式设备捕获可能会阻塞在<code>process_capture_request()</code>直到所有输出缓冲区完成填充。一个完全模式的HAL设备必须按照对应像素格式的静态元数据中指定的速率处理高分辨率请求序列。HAL仍将调用<code>process_capture_result()</code>用于提供输出；对于受限模式设备，框架层将简单的阻塞在<code>process_capture_request()</code>直到对应高分辨率捕获请求的<code>process_capture_result()</code>的调用完成。</p>
<blockquote>
<p><em>Captures in limited mode that include high-resolution (&gt; 1080p) output buffers may block in process_capture_request() until all the output buffers have been filled. A full-mode HAL device must process sequences of high-resolution requests at the rate indicated in the static metadata for that pixel format. The HAL must still call process_capture_result() to provide the output; the framework must simply be prepared for process_capture_request() to block until after process_capture_result() for that request completes for high-resolution captures for limited-mode devices.</em></p>
</blockquote>
</li>
<li><p>完全模式设备必须支持如下额外功能：</p>
<blockquote>
<p><em>Full-mode devices must support below additional capabilities:</em></p>
</blockquote>
<ul>
<li><p>必须在最大分辨率下具有大于20fps的帧率，最好能达到30fps。</p>
<blockquote>
<p><em>30fps at maximum resolution is preferred, more than 20fps is required.</em></p>
</blockquote>
</li>
<li><p>逐帧控制（<code>android.sync.maxLatency == PER_FRAME_CONTROL</code>）</p>
<blockquote>
<p><em>Per frame control (android.sync.maxLatency &#x3D;&#x3D; PER_FRAME_CONTROL).</em></p>
</blockquote>
</li>
<li><p>传感器手动控制元数据。详见在<code>android.request.availableCapabilities</code>中定义的<code>MANUAL_SENSOR</code>。</p>
<blockquote>
<p><em>Sensor manual control metadata. See MANUAL_SENSOR defined in android.request.availableCapabilities.</em></p>
</blockquote>
</li>
<li><p>后处理手动控制元数据。详见在<code>android.request.availableCapabilities</code>中定义的<code>MANUAL_POST_PROCESSING</code>。</p>
<blockquote>
<p><em>Post-processing manual control metadata. See MANUAL_POST_PROCESSING defined in android.request.availableCapabilities.</em></p>
</blockquote>
</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/11/0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Loujuch">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code Bank">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/11/0/" class="post-title-link" itemprop="url">Android Camera device HAL 3.6文档翻译——S6：错误管理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">نُشر في</span>
              

              <time title="أُنشأ: 2024-11-11 23:31:22 / عُدل: 23:39:05" itemprop="dateCreated datePublished" datetime="2024-11-11T23:31:22+08:00">2024-11-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在发生严重错误时，所有有返回值的HAL相机设备操作函数将返回<code>-ENODEV</code>或<code>NULL</code>。这表示当前设备不能继续运行并应该被框架层关闭。一旦错误被一些方法返回或<code>notify()</code>被使用<code>ERROR_DEVICE</code>参数调用，则只有<code>close()</code>方法能被成功调用，其他方法都将返回<code>-ENODEV</code>或<code>NULL</code>。</p>
<blockquote>
<p><em>Camera HAL device ops functions that have a return value will all return -ENODEV &#x2F; NULL in case of a serious error. This means the device cannot continue operation, and must be closed by the framework. Once this error is returned by some method, or if notify() is called with ERROR_DEVICE, only the close() method can be called successfully. All other methods will return -ENODEV &#x2F; NULL.</em></p>
</blockquote>
<p>如果设备被以错误的顺序操作，例如框架层在调用<code>initialize()</code>前调用<code>configure_streams()</code>，设备必须对该调用回<code>-ENOSYS</code>并不做其他任何操作。</p>
<blockquote>
<p><em>If a device op is called in the wrong sequence, for example if the framework calls configure_streams() is called before initialize(), the device must return -ENOSYS from the call, and do nothing.</em></p>
</blockquote>
<p>图像捕获过程中的瞬时错误必须按照如下规则通过<code>notify()</code>报告：</p>
<blockquote>
<p><em>Transient errors in image capture must be reported through notify() as follows:</em></p>
</blockquote>
<ol>
<li><p>若整个捕获失败，HAL将通过使用<code>ERROR_REQUEST</code>参数调用<code>notify()</code>进行报告。单独的元数据返回或缓冲区输出错误不会通过该方式报告。</p>
<blockquote>
<p><em>The failure of an entire capture to occur must be reported by the HAL by calling notify() with ERROR_REQUEST. Individual errors for the result metadata or the output buffers must not be reported in this case.</em></p>
</blockquote>
</li>
<li><p>如果无法为捕获生成元数据，但已经有图像缓冲区被填充，HAL将通过使用<code>ERROR_RESULT</code>参数调用<code>notify()</code>进行报告。</p>
<blockquote>
<p><em>If the metadata for a capture cannot be produced, but some image buffers were filled, the HAL must call notify() with ERROR_RESULT.</em></p>
</blockquote>
</li>
<li><p>如果用于输出的图像缓冲区不能被填充，但已经有元数据被生成或某些其他的缓冲区被填充，HAL将对每个失败的缓冲区通过使用<code>ERROR_BUFFER</code>参数调用<code>notify()</code>进行报告。</p>
<blockquote>
<p><em>If an output image buffer could not be filled, but either the metadata was produced or some other buffers were filled, the HAL must call notify() with ERROR_BUFFER for each failed buffer.</em></p>
</blockquote>
</li>
</ol>
<p>HAL必须仍然对每个具有瞬时错误的示例使用有效的输出或输入（如果提交了输入缓冲区）的<code>buffer_handle_t</code>调用<code>process_capture_result</code>。当元数据无法生成时，将其字段设为<code>NULL</code>。如果图像缓冲区不能被填充，则必须携带错误状态通过<code>process_capture_result</code>返回，这些缓冲区的释放栅栏必须被设置为传递给框架层的获取栅栏或是-1栅栏（如果它们已经被HAL等待）。</p>
<blockquote>
<p><em>In each of these transient failure cases, the HAL must still call process_capture_result, with valid output and input (if an input buffer was submitted) buffer_handle_t. If the result metadata could not be produced, it should be NULL. If some buffers could not be filled, they must be returned with process_capture_result in the error state, their release fences must be set to the acquire fences passed by the framework, or -1 if they have been waited on by the HAL already.</em></p>
</blockquote>
<p>使用无效参数调用相应的方法时将会返回<code>-EINVAL</code>。在这种情况下，框架层应该表现得像该方法从未被调用过一样。</p>
<blockquote>
<p><em>Invalid input arguments result in -EINVAL from the appropriate methods. In that case, the framework must act as if that call had never been made.</em></p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/04/1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Loujuch">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code Bank">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/04/1/" class="post-title-link" itemprop="url">CPP原子变量</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">نُشر في</span>

              <time title="أُنشأ: 2024-11-04 22:27:40" itemprop="dateCreated datePublished" datetime="2024-11-04T22:27:40+08:00">2024-11-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">عُدل في</span>
                <time title="عُدل: 2024-11-05 22:55:22" itemprop="dateModified" datetime="2024-11-05T22:55:22+08:00">2024-11-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>原子变量是一类能保证其各个操作均为线程安全的特殊变量，是无锁编程的基础，在高性能场景中应用十分广泛。</p>
<p>对于普通变量而言，因为对变量的修改需要经历<code>读取-修改-写回</code>等步骤，因此对其的修改不是线程安全的。原子变量使用CAS、总线锁等机制，保证上述各个步骤不会被打断，从而保证操作的线程安全。</p>
<p>CPP提供了<code>std::atomic</code>作为原子变量，它能够接受一个可平凡复制且可移动、拷贝的类型作为模板参数。CPP中，原子变量是不可拷贝和移动的。</p>
<h2 id="通用方法"><a href="#通用方法" class="headerlink" title="通用方法"></a>通用方法</h2><p>对于所有合法参数类型，其提供了以下方法：</p>
<table>
<thead>
<tr>
<th>接口</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>bool is_lock_free() const noexcept;</td>
<td>检查对该对象的全部操作是否无锁<br>除了std::atomic_flag外，CPP允许原子变量通过锁定操作来实现，而不是使用无锁原子CPU指令</td>
</tr>
<tr>
<td>void store(T desired, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;</td>
<td>使用desired对原子变量赋值</td>
</tr>
<tr>
<td>T load(std::memory_order order &#x3D; std::memory_order_seq_cst) const noexcept;</td>
<td>取出原子变量中的值</td>
</tr>
<tr>
<td>operator T() const noexcept;</td>
<td>默认类型转换函数，相当于load()</td>
</tr>
<tr>
<td>T exchange(T desired, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;</td>
<td>使用desired对原子变量赋值，并返回原子变量原值</td>
</tr>
<tr>
<td>bool compare_exchange_weak(T&amp; expected, T desired, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;<br>bool compare_exchange_strong(T&amp; expected, T desired, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;</td>
<td>相当于原子性的执行下述操作<code>if(*this == expected) &#123; auto ret = *this; *this = desired; return true; &#125; else &#123; return false; &#125;</code><br>*this和expected间的比较为按位比较，不调用<code>operator==</code>函数<br>compare_exchange_weak和compare_exchange_strong的区别主要在，为了在某些架构处理器上获得性能优势，compare_exchange_weak被允许产生允许虚假的失败</td>
</tr>
</tbody></table>
<h2 id="只适用于整形和指针的方法"><a href="#只适用于整形和指针的方法" class="headerlink" title="只适用于整形和指针的方法"></a>只适用于整形和指针的方法</h2><table>
<thead>
<tr>
<th>接口</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>T fetch_add(T arg, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;<br>T* fetch_add(std::ptrdiff_t arg, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;</td>
<td>原子性的加上参数值，返回原值</td>
</tr>
<tr>
<td>T fetch_sub(T arg, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;<br>T* fetch_sub(std::ptrdiff_t arg, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;</td>
<td>原子性的减去参数值，返回原值</td>
</tr>
<tr>
<td>T operator+&#x3D;(T arg) noexcept;<br>T* operator+&#x3D;(std::ptrdiff_t arg) noexcept;</td>
<td>原子性的加上参数值，返回计算后的值</td>
</tr>
<tr>
<td>T operator-&#x3D;(T arg) noexcept;<br>T* operator-&#x3D;(std::ptrdiff_t arg) noexcept;</td>
<td>原子性的减去参数值，返回计算后的值</td>
</tr>
<tr>
<td>T fetch_max(T arg, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;<br>T* fetch_max(T* arg, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;</td>
<td>原子性的将值设为当前值和传入参数间的较大值，并返回原值</td>
</tr>
<tr>
<td>T fetch_min(T arg, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;<br>T* fetch_min(T* arg, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;</td>
<td>原子性的将值设为当前值和传入参数间的较大值，并返回原值</td>
</tr>
<tr>
<td>T operator++() noexcept;<br>T* operator++(int)<br>T* operator++() noexcept;<br>T* operator++(int)</td>
<td>原子性的加1，返回计算后的值</td>
</tr>
<tr>
<td>T operator–() noexcept;<br>T* operator–(int)<br>T* operator–() noexcept;<br>T* operator–(int)</td>
<td>原子性的减1，返回计算后的值</td>
</tr>
</tbody></table>
<h2 id="只适用于整形的方法"><a href="#只适用于整形的方法" class="headerlink" title="只适用于整形的方法"></a>只适用于整形的方法</h2><table>
<thead>
<tr>
<th>接口</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>T fetch_and(T arg, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;<br>T* fetch_and(std::ptrdiff_t arg, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;</td>
<td>原子性的与参数值按位与，返回原值</td>
</tr>
<tr>
<td>T fetch_or(T arg, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;<br>T* fetch_or(std::ptrdiff_t arg, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;</td>
<td>原子性的与参数值按位或，返回原值</td>
</tr>
<tr>
<td>T fetch_xor(T arg, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;<br>T* fetch_xor(std::ptrdiff_t arg, std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;</td>
<td>原子性的与参数值按位异或，返回原值</td>
</tr>
<tr>
<td>T operator&amp;&#x3D;(T arg) noexcept;<br>T* operator&amp;&#x3D;(std::ptrdiff_t arg) noexcept;</td>
<td>原子性的与参数值按位与，返回计算后的值</td>
</tr>
<tr>
<td>T operator</td>
<td>&#x3D;(T arg) noexcept;<br>T* operator</td>
</tr>
<tr>
<td>T operator^&#x3D;(T arg) noexcept;<br>T* operator^&#x3D;(std::ptrdiff_t arg) noexcept;</td>
<td>原子性的与参数值按位异或，返回计算后的值</td>
</tr>
</tbody></table>
<h2 id="atomic-flag"><a href="#atomic-flag" class="headerlink" title="atomic_flag"></a>atomic_flag</h2><p><code>std::atomic_flag</code>是原子布尔类型，其总是无锁的。</p>
<p>其提供如下方法：</p>
<table>
<thead>
<tr>
<th>接口</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>bool test_and_set(std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;</td>
<td>设置flag为true并返回原值</td>
</tr>
<tr>
<td>void clear(std::memory_order order &#x3D; std::memory_order_seq_cst) noexcept;</td>
<td>设置flag为false</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/04/0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Loujuch">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code Bank">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/04/0/" class="post-title-link" itemprop="url">Bash运行某个程序一段时间后停止该程序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">نُشر في</span>
              

              <time title="أُنشأ: 2024-11-04 22:09:02 / عُدل: 22:19:39" itemprop="dateCreated datePublished" datetime="2024-11-04T22:09:02+08:00">2024-11-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Bash未提供定时函数来设置程序终止时间，但可以通过<strong>后台运行+定时kill</strong>的方式实现相似功能，具体脚本Demo如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">./test &amp;</span><br><span class="line"></span><br><span class="line">PID=$!</span><br><span class="line"><span class="comment"># 也可以使用下述方法获取PID</span></span><br><span class="line"><span class="comment"># PID=`ps aux | grep &#x27;./test&#x27; | grep -v &#x27;grep&#x27; | awk &#x27;&#123;print $2&#125;&#x27;`</span></span><br><span class="line"></span><br><span class="line">WAIT_TIME=5</span><br><span class="line"></span><br><span class="line"><span class="built_in">sleep</span> <span class="variable">$&#123;WAIT_TIME&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">kill</span> -9 <span class="variable">$&#123;PID&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">wait</span> <span class="variable">$&#123;PID&#125;</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/03/4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Loujuch">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Code Bank">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/11/03/4/" class="post-title-link" itemprop="url">Win10搭建GStreamer开发环境</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">نُشر في</span>
              

              <time title="أُنشأ: 2024-11-03 21:58:05 / عُدل: 22:14:19" itemprop="dateCreated datePublished" datetime="2024-11-03T21:58:05+08:00">2024-11-03</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="下载GStreamer"><a href="#下载GStreamer" class="headerlink" title="下载GStreamer"></a>下载GStreamer</h2><p>使用Chocolatey安装GStreamer，使用管理员权限运行powershell，运行如下命令：</p>
<figure class="highlight ps1"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">choco install <span class="literal">-yes</span> gstreamer gstreamer<span class="literal">-devel</span> gstreamer<span class="literal">-mingw</span> gstreamer<span class="literal">-mingw-devel</span></span><br></pre></td></tr></table></figure>

<h2 id="下载安装VS2022"><a href="#下载安装VS2022" class="headerlink" title="下载安装VS2022"></a>下载安装VS2022</h2><p>访问<a target="_blank" rel="noopener" href="https://visualstudio.microsoft.com/zh-hans/vs/">微软官网</a>，下载安装器进行安装。</p>
<h2 id="配置依赖"><a href="#配置依赖" class="headerlink" title="配置依赖"></a>配置依赖</h2><p>创建空项目，右键点击右侧解决方案下的项目名，在弹出的菜单中选择属性：</p>
<p><img src="/2024/11/03/4/0.png"></p>
<p><img src="/2024/11/03/4/1.png"></p>
<p>在属性页的<code>C/C++ - 常规 - 附加包含目录</code>中添加如下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\gstreamer\1.0\mingw_x86_64\include\gstreamer-1.0;C:\gstreamer\1.0\mingw_x86_64\include\glib-2.0;C:\gstreamer\1.0\mingw_x86_64\include\libxml2;C:\gstreamer\1.0\mingw_x86_64\lib\glib-2.0\include;C:\gstreamer\1.0\msvc_x86_64\include\GL;C:\gstreamer\1.0\mingw_x86_64\include;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/11/03/4/2.png"></p>
<p>在属性页的<code>连接器 - 常规 - 附加库目录</code>中添加如下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\gstreamer\1.0\msvc_x86_64\lib;C:\gstreamer\1.0\mingw_x86_64\lib;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/11/03/4/3.png"></p>
<p>在属性页的<code>连接器 - 输出 - 附加依赖项</code>中添加如下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">;gobject-2.0.lib;glib-2.0.lib;gstreamer-1.0.lib;</span><br></pre></td></tr></table></figure>

<p><img src="/2024/11/03/4/4.png"></p>
<h2 id="编写验证程序"><a href="#编写验证程序" class="headerlink" title="编写验证程序"></a>编写验证程序</h2><p>根据GStreamer教程Demo，编写如下程序验证环境搭建情况。注意，在Windows环境下需要添加<code>main_loop</code>，否则无法打开视频播放窗口。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;gst/gst.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span> </span>&#123;</span><br><span class="line">	<span class="built_in">gst_init</span>(&amp;argc, &amp;argv);</span><br><span class="line"></span><br><span class="line">	GstElement* pipeline = <span class="built_in">gst_parse_launch</span>(<span class="string">&quot;playbin uri=https://gstreamer.freedesktop.org/data/media/sintel_trailer-480p.webm&quot;</span>, <span class="literal">NULL</span>);</span><br><span class="line">	GMainLoop* main_loop = <span class="built_in">g_main_loop_new</span>(<span class="literal">NULL</span>, FALSE);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">gst_element_set_state</span>(pipeline, GST_STATE_PLAYING);</span><br><span class="line">	<span class="built_in">g_main_loop_run</span>(main_loop);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">gst_element_set_state</span>(pipeline, GST_STATE_NULL);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">gst_object_unref</span>(pipeline);</span><br><span class="line">	<span class="built_in">g_main_loop_unref</span>(main_loop);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行后成功播放目标视频，证明环境搭建完毕。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="الصفحة التالية"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          المحتويات
        </li>
        <li class="sidebar-nav-overview">
          عام
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Loujuch</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">41</span>
          <span class="site-state-item-name">المقالات</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">الوسوم</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Loujuch</span>
</div>
  <div class="powered-by">تطبيق الموقع <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
